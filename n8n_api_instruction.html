<h2>Инструкция: Как создать воркфлоу в n8n через API</h2>

<h3>1. Требования</h3>
<ul>
    <li>Должен быть создан API-ключ в n8n (Settings → API Keys).</li>
    <li>Должен быть доступен endpoint n8n (например, <code>https://your-n8n-instance.com</code>).</li>
    <li>Должен быть подготовлен JSON-файл с описанием воркфлоу (например, <code>my_workflow.json</code>), который
        обязательно содержит поля <code>"name"</code>, <code>"nodes"</code>, <code>"connections"</code>,
        <code>"settings"</code>.
    </li>
</ul>

<h3>2. Пример запроса через curl</h3>
<pre><code>curl -X POST \
  -H "X-N8N-API-KEY: &lt;YOUR_N8N_API_KEY&gt;" \
  -H "Content-Type: application/json" \
  --data-binary @my_workflow.json \
  "&lt;YOUR_N8N_HOST&gt;/api/v1/workflows"
</code></pre>
<p><b>Пояснения:</b><br>
    &lt;YOUR_N8N_API_KEY&gt; — ваш API-ключ n8n.<br>
    &lt;YOUR_N8N_HOST&gt; — адрес вашей инстанции n8n (например, <code>https://your-n8n-instance.com</code>).<br>
    my_workflow.json — путь к вашему JSON-файлу воркфлоу.</p>

<h3>3. Пример запроса через Python (с использованием requests)</h3>
<pre><code>import requests

N8N_HOST = "&lt;YOUR_N8N_HOST&gt;"
N8N_API_KEY = "&lt;YOUR_N8N_API_KEY&gt;"
WORKFLOW_FILE = "my_workflow.json"

with open(WORKFLOW_FILE, "rb") as f:
    data = f.read()

response = requests.post(
    f"{N8N_HOST}/api/v1/workflows",
    headers={
        "X-N8N-API-KEY": N8N_API_KEY,
        "Content-Type": "application/json"
    },
    data=data
)

print("Status code:", response.status_code)
print("Response:", response.text)
</code></pre>

<h3>4. Минимальный пример содержимого JSON-файла воркфлоу</h3>
<pre><code>{
  "name": "My Example Workflow",
  "nodes": [
    // ... список узлов ...
  ],
  "connections": {
    // ... связи между узлами ...
  },
  "settings": {}
}
</code></pre>

<p><b>Важно:</b><br>
    Если API возвращает ошибку 400 с сообщением о недостающем поле — проверь, что все обязательные поля
    присутствуют.<br>
    Для обновления существующего воркфлоу используется PATCH-запрос на endpoint <code>/rest/workflows/&lt;id&gt;</code>.
</p>